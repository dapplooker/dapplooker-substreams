syntax = "proto3";

package acme;

message BigInt {
  bytes bytes = 1;
}

// ## Block data ##
message BlockMeta {
  string hash = 1;
  uint64 number = 2;
  string parent_hash = 3;
  string timestamp = 4;
}
message BlockHeader {
  bytes parent_hash = 1;
  bytes uncle_hash = 2;
  bytes coinbase = 3;
  bytes state_root = 4;
  bytes transactions_root = 5;
  bytes receipt_root = 6;
  bytes logs_bloom = 7;
  uint64 number = 8;
  uint64 gas_limit = 9;
  uint64 gas_used = 10;
  bytes extra_data = 11;
  bytes mix_hash = 12;
  uint64 nonce = 13;
}


// ## Transaction receipt ##
message TransactionReceipt {
  bytes state_root = 1;
  uint64 cumulative_gas_used = 2;
  bytes logs_bloom = 3;
}

// ## Transaction List ##
message TransactionList {
  repeated TranDetail transaction_details_list = 1;
}

// ## Transaction Details ##
message TranDetail {
  uint64 gas_used = 1;
  string status = 2;
  bytes block_hash = 3;
  uint32 index = 4;
  uint64 begin_ordinal = 5;
  uint64 end_ordinal = 6;
  uint64 nonce = 7;
  uint64 gas_limit = 8;
  bytes to = 9;
  bytes input = 10;
  bytes r = 11;
  bytes v = 12;
  bytes s = 13;
  bytes from = 14;
  bytes public_key = 15;
  TransactionReceipt receipt = 16;
  repeated Call call_details_list = 17;
}

message Call {
  uint32 index = 1;
  uint32 parent_index = 2;
  uint32 depth = 3;
  int32 call_type = 4;
  bytes caller = 5;
  bytes address = 6;
  uint64 gas_limit = 7;
  uint64 gas_consumed = 8;
  bytes return_data = 9;
  bytes input = 10;
  bool executed_code = 11;
  bool suicide = 12;
  // map<string, string> keccak_preimages = 13;
  // repeated StorageChange storage_changes = 14;
  // repeated BalanceChange balance_changes = 15;
  // repeated NonceChange nonce_changes = 16;
  // repeated Log logs = 17;
  // repeated CodeChange code_changes = 18;
  // repeated GasChange gas_changes = 19;
  bool status_failed = 13;
  bool status_reverted = 14;
  string failure_reason = 15;
  bool state_reverted = 16;
  uint64 begin_ordinal = 17;
  uint64 end_ordinal = 18;
  // repeated AccountCreation account_creations = 26;
}


message StorageChange {
  bytes key = 1;
  bytes value = 2;
}

message BalanceChange {
  bytes address = 1;
  int64 value = 2;
}

message NonceChange {
  bytes address = 1;
  uint64 value = 2;
}

message Log {
  bytes address = 1;
  bytes data = 2;
  repeated bytes topics = 3;
}

message CodeChange {
  bytes address = 1;
  bytes code = 2;
}

message GasChange {
  int32 gas_cost = 1;
  string change_type = 2;
}

message AccountCreation {
  bytes address = 1;
  bytes balance = 2;
  uint64 nonce = 3;
  repeated StorageChange initial_storage = 4;
}